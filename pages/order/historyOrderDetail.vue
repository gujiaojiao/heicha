<template>
	<view class="order" :style="{ paddingTop: safeAreaInsets.top + 'px' }">
		<!-- å›ºå®šé¡¶éƒ¨åŒºåŸŸ -->
		<view class="fixed-area">
			<view class="fixed-header">
				<uni-icons type="left" size="30" class="back" @click="back"></uni-icons>
				<view class="orderTitle">è®¢å•è¯¦æƒ…</view>
			</view>
		</view>

		<!-- æ»šåŠ¨å†…å®¹åŒºåŸŸ -->
		<view class="scrollable-area">
			<!-- å–é¤å·å’ŒçŠ¶æ€ -->
			<view class="order-status-section">
				<view class="pickup-number">
					<text class="label">å–é¤å·</text>
					<text class="number">B500</text>
					<view class="status">
						<text class="dots">â€¢â€¢â€¢</text>
						<text class="status-text">è®¢å•å·²å®Œæˆ</text>
						<text class="dots">â€¢â€¢â€¢</text>
					</view>
				</view>
			</view>

			<!-- ä¿ƒé”€æ¨ªå¹… -->
			<!-- <view class="promo-banner">
				<view class="promo-content">
					<view class="promo-text">
						<text class="main-text">åŠ å…¥ç‚¹é—¨ç¤¾ç¾¤</text>
						<text class="sub-text">é¦–æ¬¡å…¥ç¾¤äº«é¢†</text>
					</view>
					<view class="promo-offer">
						<text class="offer-tag">è¶…å€¼åˆ¸åŒ…</text>
						<text class="offer-amount">30</text>
						<text class="offer-currency">å…ƒ</text>
					</view>
				</view>
				<view class="promo-characters">
					<view class="character char1">â˜ï¸</view>
					<view class="character char2">â¤ï¸</view>
					<view class="character char3">ğŸŒ¿</view>
				</view>
			</view> -->

			<!-- è®¢å•è¯¦æƒ…å¡ç‰‡ -->
			<view class="order-details">
				<view class="detail-card">
					<text class="detail-label">å–é¤æ—¶é—´</text>
					<text class="detail-value">ç«‹å³å–é¤</text>
				</view>
				<view class="detail-card">
					<text class="detail-label">äº«ç”¨æ–¹å¼</text>
					<text class="detail-value">è‡ªå–</text>
				</view>
			</view>

			<!-- é—¨åº—ä¿¡æ¯ -->
			<view class="store-info-card">
				<view class="store-header">
					<text class="store-name">è‹å·åˆ›ä¸šå›­åº—</text>
					<uni-icons type="right" size="16" color="#999"></uni-icons>
				</view>
				<view class="store-address">
					<uni-icons type="location" size="16" color="#999"></uni-icons>
					<text class="address-text">æ±Ÿè‹çœè‹å·å¸‚è™ä¸˜åŒºé«˜æ–°åŒº...</text>
				</view>
				<view class="store-contact">
					<uni-icons type="phone" size="20" color="#1aad19"></uni-icons>
				</view>
			</view>

			<!-- å•†å“è¯¦æƒ… -->
			<view class="product-card">
				<view class="product-info">
					<image src="/static/images/menu/alittle.png" class="product-image" mode="aspectFill"></image>
					<view class="product-details">
						<text class="product-name">å››å­£å¥¶é’</text>
						<view class="product-options">
							<text class="option">ä¸­æ¯</text>
							<text class="option">å»å†°</text>
							<text class="option">ä¸å¦å¤–åŠ ç³–</text>
							<text class="option">æ³¢éœ¸</text>
							<text class="option">æ¤°æœ</text>
						</view>
						<view class="promo-tags">
							<text class="promo-tag">ã€è¶…å€¼ã€‘ç»å…¸æ‹›ç‰Œ8é€‰1</text>
							<text class="discount">- Â¥12</text>
						</view>
					</view>
					<view class="product-price">
						<text class="price">Â¥12.00</text>
						<text class="quantity">x1</text>
					</view>
				</view>
			</view>
		</view>

		<!-- åº•éƒ¨å›ºå®šæŒ‰é’® -->
		<view class="bottom-fixed">
			<button class="reorder-btn" @click="reorder">å†æ¥ä¸€å•</button>
		</view>
	</view>
</template>

<script setup lang="ts">
import { ref } from 'vue'

// å£°æ˜uniå…¨å±€å˜é‡
declare const uni: any

const safeAreaInsets = (uni.getSystemInfoSync && uni.getSystemInfoSync().safeAreaInsets) || { top: 0 }

const back = () => {
	uni.navigateBack({ delta: 1 })
}

const reorder = () => {
	// å†æ¥ä¸€å•çš„é€»è¾‘
	// uni.showToast({
	// 	title: 'æ­£åœ¨è·³è½¬åˆ°ç‚¹é¤é¡µé¢...',
	// 	icon: 'loading',
	// 	duration: 500
	// })

	setTimeout(() => {
		uni.switchTab({
			url: '/pages/menu/list'
		})
	}, 200)
}
</script>

<style lang="scss" scoped>
.order {
	background: white;
	height: 100vh;
	display: flex;
	flex-direction: column;
	box-sizing: border-box;

	.fixed-area {
		flex-shrink: 0; // é˜²æ­¢æ”¶ç¼©

		.fixed-header {
			width: 100%;
			height: 50px;
			display: flex;
			align-items: center;
			position: relative;
			background: white;
			border-bottom: 2px solid rgba(0, 0, 0, 0.1);

			.back {
				position: absolute;
				left: 2%;
				display: flex;
				align-items: center;
				height: 100%;
			}

			.orderTitle {
				position: absolute;
				left: 50%;
				transform: translateX(-50%);
				font-size: 16px;
				font-weight: 500;
				height: 100%;
				display: flex;
				align-items: center;
			}
		}
	}

	.scrollable-area {
		flex: 1; // å æ®å‰©ä½™ç©ºé—´
		overflow-y: auto; // å¯ç”¨å‚ç›´æ»šåŠ¨
		-webkit-overflow-scrolling: touch; // iOSå¹³å°å¹³æ»‘æ»šåŠ¨
		padding: 10px;
		box-sizing: border-box;
		background-color: #f7f7f7;

		// å–é¤å·å’ŒçŠ¶æ€åŒºåŸŸ
		.order-status-section {
			background: white;
			border-radius: 12px;
			padding: 20px;
			margin-bottom: 15px;
			text-align: center;

			.pickup-number {
				.label {
					display: block;
					font-size: 14px;
					color: #666;
					margin-bottom: 8px;
				}

				.number {
					display: block;
					font-size: 32px;
					font-weight: bold;
					color: #1aad19;
					margin-bottom: 15px;
				}

				.status {
					display: flex;
					align-items: center;
					justify-content: center;

					.dots {
						color: #ccc;
						font-size: 12px;
						margin: 0 8px;
					}

					.status-text {
						color: #333;
						font-size: 16px;
						font-weight: 500;
					}
				}
			}
		}

		// // ä¿ƒé”€æ¨ªå¹…
		// .promo-banner {
		// 	background: linear-gradient(135deg, #1aad19, #2ecc71);
		// 	border-radius: 12px;
		// 	padding: 20px;
		// 	margin-bottom: 15px;
		// 	display: flex;
		// 	justify-content: space-between;
		// 	align-items: center;
		// 	color: white;

		// 	.promo-content {
		// 		flex: 1;

		// 		.main-text {
		// 			display: block;
		// 			font-size: 18px;
		// 			font-weight: bold;
		// 			margin-bottom: 5px;
		// 		}

		// 		.sub-text {
		// 			display: block;
		// 			font-size: 14px;
		// 			opacity: 0.9;
		// 			margin-bottom: 10px;
		// 		}

		// 		.promo-offer {
		// 			display: flex;
		// 			align-items: baseline;

		// 			.offer-tag {
		// 				background: rgba(255, 255, 255, 0.2);
		// 				padding: 2px 8px;
		// 				border-radius: 12px;
		// 				font-size: 12px;
		// 				margin-right: 8px;
		// 			}

		// 			.offer-amount {
		// 				font-size: 24px;
		// 				font-weight: bold;
		// 				margin-right: 4px;
		// 			}

		// 			.offer-currency {
		// 				font-size: 16px;
		// 			}
		// 		}
		// 	}

		// 	.promo-characters {
		// 		display: flex;
		// 		gap: 8px;

		// 		.character {
		// 			font-size: 24px;
		// 			opacity: 0.8;
		// 		}
		// 	}
		// }

		// è®¢å•è¯¦æƒ…å¡ç‰‡
		.order-details {
			margin-bottom: 15px;

			.detail-card {
				background: white;
				border-radius: 8px;
				padding: 15px;
				margin-bottom: 8px;
				display: flex;
				justify-content: space-between;
				align-items: center;

				.detail-label {
					color: #666;
					font-size: 14px;
				}

				.detail-value {
					color: #333;
					font-size: 14px;
					font-weight: 500;
				}
			}
		}

		// é—¨åº—ä¿¡æ¯å¡ç‰‡
		.store-info-card {
			background: white;
			border-radius: 12px;
			padding: 20px;
			margin-bottom: 15px;
			position: relative;

			.store-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 12px;

				.store-name {
					font-size: 16px;
					font-weight: bold;
					color: #333;
				}
			}

			.store-address {
				display: flex;
				align-items: center;
				margin-bottom: 15px;

				.address-text {
					margin-left: 8px;
					color: #666;
					font-size: 14px;
				}
			}

			.store-contact {
				position: absolute;
				right: 20px;
				top: 20px;
			}
		}

		// å•†å“è¯¦æƒ…å¡ç‰‡
		.product-card {
			background: white;
			border-radius: 12px;
			padding: 20px;
			margin-bottom: 80px; // ä¸ºåº•éƒ¨æŒ‰é’®ç•™å‡ºç©ºé—´

			.product-info {
				display: flex;

				.product-image {
					width: 80px;
					height: 80px;
					border-radius: 8px;
					margin-right: 15px;
					flex-shrink: 0;
				}

				.product-details {
					flex: 1;
					margin-right: 15px;

					.product-name {
						display: block;
						font-size: 16px;
						font-weight: bold;
						color: #333;
						margin-bottom: 8px;
					}

					.product-options {
						display: flex;
						flex-wrap: wrap;
						gap: 6px;
						margin-bottom: 8px;

						.option {
							background: #f5f5f5;
							color: #666;
							padding: 2px 8px;
							border-radius: 12px;
							font-size: 12px;
						}
					}

					.promo-tags {
						display: flex;
						align-items: center;
						gap: 8px;

						.promo-tag {
							color: #e74c3c;
							font-size: 12px;
						}

						.discount {
							color: #e74c3c;
							font-size: 14px;
							font-weight: bold;
						}
					}
				}

				.product-price {
					text-align: right;
					flex-shrink: 0;

					.price {
						display: block;
						font-size: 16px;
						font-weight: bold;
						color: #333;
						margin-bottom: 4px;
					}

					.quantity {
						color: #999;
						font-size: 14px;
					}
				}
			}
		}
	}

	// åº•éƒ¨å›ºå®šæŒ‰é’®
	.bottom-fixed {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		background: white;
		padding: 15px 20px;
		border-top: 1px solid #eee;
		z-index: 100;

		.reorder-btn {
			width: 100%;
			height: 50px;
			background:$alittle-color ;
			color: white;
			border: none;
			border-radius: 25px;
			font-size: 16px;
			font-weight: bold;
		}
	}
}
</style>